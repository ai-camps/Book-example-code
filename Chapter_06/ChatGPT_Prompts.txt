Hi, ChatGPT, please act as a proficient senior software developer to develop the cloud registration feature of smart smoke detector. I am a high school student with basic knowledge of Python but no C++ experience. Please ensure that your code is easy to understand for someone with my background. Please try to add comments to each line of your code, do not produce pseudo code.
You shall use Microsoft Visual Studio Code IDE with the PlatformIO extension, espressif32 platform, and Arduino framework. Temporarily hardcode Wi-Fi access credentials for development purposes, but plan for a secure credential management method in production.
The expected feature logic is strictly following below steps:
•Step 1: Pre-configure the ESP32 device in AWS IoT Core
•Step 2: Initiate the Wi-Fi connection from the ESP32 device to the home Wi-Fi router
•Step 3: Securely connect with AWS IoT Core service through TLS
•Step 4: Create a JSON payload including device ID, model, and firmware version, battery level and current timestamp at Pacific Time Zone
•Step 5: Send the MQTT Publish Topic with JSON payload to AWS IoT Core
•Step 6: Change the ESP32 device LED to always-on green upon successful registration
•Step 7: Keep Wi-Fi connection alive for 1 minute
•Step 8: Drop the Wi-Fi connection but keep the LED always-on green
•Step 9: Restart from Step 2 after 4 hours
Please structure your C++ source code including sections for entire code explanation, libraries import, variables declaration, function definition, setup() function, loop() function, and insert a line with "*" between each section.
•Code explanation Section: Begin with comprehensive comments describing the creation date, author, the purpose and structure of the code, security risks, testing and validation approach.
•Libraries Import Section: Import necessary libraries, commenting on the purpose of each library
•Variables Declare Section: Declare the variables used in this code, commenting on the definition of each.
•Functions Section: Define functions with clear comments explaining their purpose and usage.
•Setup Section: Detail the setup() function, including initial configurations.
•Loop Section: Outline the loop() part, describing its continuous operations.
